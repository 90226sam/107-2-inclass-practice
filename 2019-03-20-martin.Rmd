---
title: '2019-03-20'
author: ""
date: "04/03/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
dialogue <- c("小明說：'明天不用上課。'",
               "小花說：'真的嗎？'")

cat(dialogue, sep="\n")
```
```{r}
dialogue <- c('小明說："明天不用上課。"',
               '小花說："真的嗎？"')

cat(dialogue, sep="\n")
```
```{r}
aLogical <- c(T,TRUE,F,FALSE,FALSE)
class(aLogical)
```

```{r}
b<-"你好"
```

```{r}
class(b)
```

```{r}
bVector<-c("你好","How are you?")
```

```{r}
class(bVector)
```

```{r}
# 加總向量內的所有元素值。
sum(aLogical)
```

```{r}
studentMajors <- factor(
  c("經濟系", "經濟系", "法律系")
)
```

```{r}
typeof(studentMajors)
```

```{r}
levels(studentMajors)
```

```{r}
studentMajors
```
```{r}
as.integer(studentMajors)
```

```{r}
birthplace <- factor(c("台北市","台中市")
)
```

```{r}
typeof(birthplace)
```
```{r}
levels(birthplace)
```
```{r}
birthplace
```
```{r}
as.integer(birthplace)
```

```{r}
birthplace <- factor(c("台北市","台中市")
)
levels(birthplace)
class(birthplace)
typeof(birthplace)
as.integer(birthplace)
```

```{r}
ex <- factor(c("陳小美","王大妹","廖小水","蘇方芳"))
typeof(ex)
levels(ex)
class(ex)
as.integer(ex)
```

```{r}
library(lubridate)
```

```{r}
dtObject<-ymd_hms("1970-01-01 00:02:53") 
```

```{r}
dtObject<-ymd_hms(c("2017-03-20 12:30:57","2019-03-20 16:47:59"))
```

```{r}
class(dtObject)
```

```{r}
dtObject
```

```{r}
Sys.timezone()
```

```{r}
typeof(dtObject)
```

```{r}
dtObject<-ymd_hms(c("2017-03-20 12:30:57","2019-03-20 16:47:59"))
as.double(dtObject)
```

```{r}
Sys.timezone()
```

```{r}
library(lubridate)
```


```{r}
twDateTime<-ymd_hms("2019-03-27 15:32:10", tz="Asia/Taipei")
```


```{r}
OsloDateTime<-with_tz(twDateTime, tzone="Europe/Oslo")
```

```{r}
typeof(OsloDateTime)
as.double(OsloDateTime)
```


```{r}
twDateTime2<-ymd("2019/3/27")
```

```{r}
twDateTime3<-mdy("March 27,2019")
```

```{r}
KoreaDateTime<-with_tz(twDateTime3, tzone="Asia/Seoul")
```

```{r}
as.double(KoreaDateTime)
```

```{r}
as.integer(KoreaDateTime)
```

```{r}
a<-c(27,38,-19)
```

```{r}
aL<-c(24L,-17L,3L)
```

```{r}
a+aL
```

```{r}
b<-c(100L,47L,-283L)
```

```{r}
(a/b)+aL
```

```{r}
c<-23
```

```{r}
d<-5
```

```{r}
c%%d
```

```{r}
DateTime1<-ymd_hms("2019-08-11 00:00:38")
```

```{r}
DateTime1+years(1)
```

```{r}
DateTime1+hours(20)
```

```{r}
x<-38
y<-37.99999999999999
```

```{r}
x<y
x>y
x<=y
x>=y
x==y
```

```{r}
aa<-c(6,NA,9)
bb<-c(7,8,9)
```

aa集合是否屬於bb (%in%)
```{r}
aa%in%bb
aa!=bb
```

```{r}
is.na(aa)
```

```{r}
X1 <- c("阿美","阿森")
Y1 <- c("阿美","阿彬")
```

```{r}
X1 == Y1
X1 != Y1
```

! negation (邏輯上反向操作)
```{r}
X1 == Y1
!(X1 == Y1)
```

```{r}
library(readr)
```





```{r}
library(readr)
exData2 <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/exData2.csv")
currency <- exData2$ 幣別
```

head 會顯示物件前六個元素值
```{r}
head(currency)
```

```{r}
class(currency)
```

左邊為新物件        右邊為舊物件
```{r}
currency <- as.factor(currency)
```


```{r}
levels(currency)
```

```{r}
length(levels(currency))
```

初學者適用以下(一步一步慢慢來)
```{r}
step1_extractlevelsVector <- levels(currency)
step1_extractlevelsVector

step2_countVectorlength <- length(step1_extractlevelsVector)
step2_countVectorlength
```

如何去算出一個向量裡 同一類別元素有多少個
舉例
```{r}
currency2 <- c("日圓","美元","日圓")
currency2
```

```{r}
currency2 == "日圓"
```

邏輯裡運用T &　F 去判別數量 所以用sum()加起來就可以得知
```{r}
sum(currency2 == "日圓")
```

因此例題:

```{r}
sum(currency == "日圓JPY/USD")
```

```{r}
x5 <- c("台北市","新北市","高雄市")
greatTaipei <- c("台北市","新北市")

x5%in%greatTaipei
!(x5%in%greatTaipei)
```

```{r}
y5 <- c("女","男","女")
y5 == "女"
!(y5 == "女")
```
圈圈是要圈出"Rational Operation"為真的元素在物件內的位置

```{r}
x5%in%greatTaipei
y5 == "女"
(x5%in%greatTaipei) & (y5 == "女")
```

```{r}
which((x5%in%greatTaipei) & (y5 == "女"))
```

A|B 表示兩條件其中一個是True
```{r}
(x5%in%greatTaipei)
(y5 == "女")
(x5%in%greatTaipei) | (y5 == "女")
```

```{r}
which((x5%in%greatTaipei) | (y5 == "女"))
```

xor表示"只滿足其中一條件者" 所以兩個都滿足不算
```{r}
(x5%in%greatTaipei)
(y5 == "女")
xor(x5%in%greatTaipei , y5 == "女")
```

```{r}
which(xor(x5%in%greatTaipei , y5 == "女"))
```

綜合練習
```{r}
library(readr)
exData2 <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/exData2.csv")
date <- as.character(exData2$期間)
currency <- exData2$幣別
exchangeRate <- exData2$匯率
```

確認
```{r}
class(date)
```

```{r}
head(date)
```

先把date的calss存成date calss -> lubridate
```{r}
library(lubridate)
date <- ymd(date)
```

```{r}
class(date)
```

Q2. 第一題1980-08-01之後的資料有多少筆

```{r}
isAfter19800801 <- date >= ymd("1980-08-01")
isAfter19800801
```

```{r}
head(as.integer(date))
as.integer(ymd("1980-08-01"))
head(as.integer(date)) >= as.integer(ymd("1980-08-01"))
```

```{r}
class(isAfter19800801)
```

```{r}
sum(isAfter19800801)
```

Q3.幣別為"歐元USD/EUR"的資料有多少筆

```{r}
sum(currency == "歐元USD/EUR")
```

Q4. exchangeRate有多少筆NA
```{r}
isexchangeRateNA <- is.na(exchangeRate)
sum(isexchangeRateNA)
```

Q5. 排除NA後 幣值為"歐元USD/EUR"的資料有多少筆

```{r}
isNotNA <- !is.na(exchangeRate)
isEuro <- currency == "歐元USD/EUR"
```

以下兩者做法都可以
```{r}
sum((isNotNA) & (isEuro))

satisfyBoth <- isNotNA & isEuro
sum(satisfyBoth)
```













